<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart AI - AhmedXR</title>
<style>
body {margin:0; background:#101010; font-family:"Tahoma"; color:white; display:flex; flex-direction:column; height:100vh;}
header{text-align:center;padding:15px;background:#1a1a1a;font-size:22px;font-weight:bold;border-bottom:1px solid #333;}
#chat{flex:1;overflow-y:auto;padding:15px;display:flex;flex-direction:column;}
.msg{padding:10px 14px;margin:6px 0;max-width:75%;border-radius:14px;line-height:1.5;}
.user{background:#007bff;align-self:flex-end;text-align:right;}
.bot{background:#333;align-self:flex-start;text-align:left;}
#sendBox{display:flex;background:#1a1a1a;padding:10px;border-top:1px solid #333;}
input{flex:1;padding:12px;border:none;border-radius:10px;font-size:16px;outline:none;background:#222;color:white;}
button{width:80px;margin-left:8px;background:#0a84ff;color:white;border:none;border-radius:10px;font-size:17px;font-weight:bold;}
#email-section,#code-section{padding:20px;display:flex;flex-direction:column;gap:10px;}
</style>
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
</head>

<body>
<header>ğŸ¤– Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ - AhmedXR</header>

<!-- ØªØ³Ø¬ÙŠÙ„ Ø¨Ø±ÙŠØ¯ -->
<div id="email-section">
    <input type="email" id="email" placeholder="Ø§ÙƒØªØ¨ Ø¨Ø±ÙŠØ¯Ùƒ">
    <button onclick="sendCode()">âœ”ï¸ Ø§Ø±Ø³Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚</button>
</div>

<!-- Ø§Ù„ØªØ­Ù‚Ù‚ -->
<div id="code-section" style="display:none;">
    <input type="text" id="verify" placeholder="Ø§Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚">
    <button onclick="checkCode()">ğŸ” ØªØ­Ù‚Ù‚</button>
</div>

<!-- Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© -->
<div id="chat" style="display:none;"></div>

<div id="sendBox" style="display:none;">
    <input id="msg" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ...">
    <button onclick="sendAI()">ğŸ“©</button>
</div>

<script>
// ğŸ”¹ Ø¥Ø¹Ø¯Ø§Ø¯ EmailJS
emailjs.init("IHX7vQCj6HLK_TJGN");
let code = Math.floor(100000 + Math.random()*900000);

function sendCode(){
    let email = document.getElementById("email").value;
    if(!email) return alert("Ø§ÙƒØªØ¨ Ø¨Ø±ÙŠØ¯Ùƒ!");
    emailjs.send("service_28lleeh","template_z942frk",{user_email:email, code:code});
    alert("âœ”ï¸ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯ Ù„Ø¨Ø±ÙŠØ¯Ùƒ");
    document.getElementById("email-section").style.display="none";
    document.getElementById("code-section").style.display="flex";
}

function checkCode(){
    if(document.getElementById("verify").value == code){
        alert("ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ ğŸ‰");
        document.getElementById("code-section").style.display="none";
        document.getElementById("chat").style.display="flex";
        document.getElementById("sendBox").style.display="flex";
    } else alert("âŒ Ø§Ù„ÙƒÙˆØ¯ ØºÙ„Ø·");
}

// ğŸ”¹ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø­Ù‚ÙŠÙ‚ÙŠ Ù…Ø¹ OpenAI
async function sendAI(){
  let message=document.getElementById("msg").value;
  if(!message) return;
  addUser(message);
  document.getElementById("msg").value="";

  try {
    const response = await fetch("https://api.openai.com/v1/chat/completions",{
      method:"POST",
      headers:{
        "Content-Type":"application/json",
        "Authorization":"Bearer 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"
      },
      body:JSON.stringify({
        model:"gpt-4o-mini",
        messages:[{role:"user",content:message}]
      })
    });
    const data = await response.json();
    addBot(data.choices[0].message.content);
  } catch(e){
    addBot("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ØŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ø£Ùˆ Ù…ÙØªØ§Ø­ OpenAI");
  }
}

// Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
function addUser(t){chat.innerHTML+=`<div class='msg user'>${t}</div>`;scroll();}
function addBot(t){chat.innerHTML+=`<div class='msg bot'>${t}</div>`;scroll();}
function scroll(){chat.scrollTop = chat.scrollHeight;}
</script>
</body>
</html>

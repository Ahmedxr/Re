<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chat Bot 1.4 - Ù…Ø¹Ø¯Ù„</title>
<style>
body { margin:0; font-family:"Tahoma"; background:#111; color:white; }
header { text-align:center; padding:15px; background:#1a1a1a; font-size:22px; font-weight:bold; border-bottom:1px solid #333;}
#chatbox {
  height:70vh;
  overflow-y:auto;
  padding:15px;
  display:flex;
  flex-direction:column;
  gap:5px;
}
.msg {
  padding:10px 12px;
  border-radius:12px;
  max-width:80%;
  line-height:1.4;
  word-wrap: break-word;
  word-break: break-word;
}
.user { background:#007bff; align-self:flex-end; text-align:right; }
.ai { background:#333; align-self:flex-start; text-align:left; }
#controls {
  display:flex;
  padding:10px;
  background:#1a1a1a;
  border-top:1px solid #333;
  gap:5px;
}
#controls input {
  flex:1;
  padding:12px;
  border:none;
  border-radius:10px;
  font-size:16px;
  outline:none;
  background:#222;
  color:white;
}
#controls button {
  padding:0 15px;
  background:#0a84ff;
  color:white;
  border:none;
  border-radius:10px;
  font-size:16px;
  cursor:pointer;
}
</style>
</head>
<body>

<header>ğŸ¤– Chat Bot 1.4</header>

<div id="chatbox"></div>

<div id="controls">
  <input id="prompt" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§...">
  <button onclick="sendMsg()">Ø§Ø±Ø³Ø§Ù„</button>
</div>

<script>
const API_KEY = "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";

async function sendMsg() {
  let text = document.getElementById("prompt").value.trim();
  if(!text) return;

  // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  document.getElementById("chatbox").innerHTML += `<div class='msg user'>${text}</div>`;
  document.getElementById("prompt").value="";

  try {
    const response = await fetch("https://api.openai.com/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": "Bearer " + API_KEY
      },
      body: JSON.stringify({
        model: "gpt-3.5-turbo",
        messages: [{ role:"user", content:text }]
      })
    });

    const data = await response.json();
    let reply = data.choices[0].message.content;

    // Ø¹Ø±Ø¶ Ø±Ø¯ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
    document.getElementById("chatbox").innerHTML += `<div class='msg ai'>${reply}</div>`;

    // Scroll ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ø¢Ø®Ø± Ø±Ø³Ø§Ù„Ø©
    let chatbox = document.getElementById("chatbox");
    chatbox.scrollTop = chatbox.scrollHeight;

  } catch (err) {
    document.getElementById("chatbox").innerHTML += `<div class='msg ai'>âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„!</div>`;
    console.log(err);
  }
}
</script>

</body>
</html>
